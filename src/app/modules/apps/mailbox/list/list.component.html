<div class="list-wrapper">

    <ng-container *ngIf="mails && mails.length > 0; else loading">

        <!-- Header -->
        <div class="header">

            <div class="flex">

                <button class="gt-md:hidden"
                        mat-icon-button
                        (click)="content.sidebar.toggle()">
                    <mat-icon class="icon-size-24">menu</mat-icon>
                </button>

            </div>

            <div class="flex">

                <div class="pagination-info">
                    <span class="">{{pagination.startIndex + 1}}</span>
                    <span class="secondary-text mx-4">-</span>
                    <span class="">{{pagination.endIndex + 1}}</span>
                    <span class="secondary-text mx-4">of</span>
                    <span class="">{{pagination.totalResults}}</span>
                </div>

                <a mat-icon-button
                   [disabled]="pagination.currentPage === 1"
                   [routerLink]="['../' + (pagination.currentPage > 1 ? pagination.currentPage - 1 : 1 )]">
                    <mat-icon class="icon-size-18">arrow_back_ios</mat-icon>
                </a>

                <a mat-icon-button
                   [disabled]="pagination.currentPage === pagination.lastPage"
                   [routerLink]="['../' + (pagination.currentPage < pagination.lastPage ? pagination.currentPage + 1 : pagination.lastPage )]">
                    <mat-icon class="icon-size-18">arrow_forward_ios</mat-icon>
                </a>

            </div>

        </div>

        <!-- Mails list -->
        <div class="list">

            <a class="item"
               *ngFor="let mail of mails"
               [ngClass]="{'selected': (selectedMail && selectedMail.id === mail.id)}"
               [routerLink]="[mail.id]"
               (click)="onMailSelected(mail)">

                <div class="unread-indicator"
                     *ngIf="mail.unread"></div>

                <div class="left">

                    <div class="avatar">
                        <img [src]="mail.from.avatar">
                    </div>

                    <div class="indicators">

                        <div class="flex justify-center mt-8"
                             *ngIf="mail.attachments && mail.attachments.length > 0">
                            <mat-icon class="icon-size-18">attachment</mat-icon>
                        </div>

                        <div class="flex justify-center mt-12"
                             *ngIf="mail.starred">
                            <mat-icon class="orange-fg icon-size-18">star</mat-icon>
                        </div>

                    </div>

                </div>

                <div class="min-w-0 ml-24">

                    <div class="flex justify-between">

                        <div class="min-w-0 mr-24">

                            <div class="flex items-center leading-normal">
                                <div>
                                    {{mail.from.contact.split('<')[0].trim()}}
                                </div>
                                <mat-icon class="ml-4 icon-size-12 red-fg"
                                          *ngIf="mail.important">
                                    label_important
                                </mat-icon>
                            </div>

                            <div class="truncate"
                                 [ngClass]="{'font-bold': mail.unread}">
                                {{mail.subject}}
                            </div>

                        </div>

                        <div class="date secondary-text">
                            {{mail.date | date}}
                        </div>

                    </div>

                    <div class="content secondary-text mt-8">
                        {{mail.content.substring(0, 80)}}...
                    </div>

                </div>

            </a>

        </div>

    </ng-container>

    <ng-template #loading>

        <ng-container *ngIf="mails !== null">
            There are no mails
        </ng-container>

    </ng-template>

</div>

<router-outlet></router-outlet>

