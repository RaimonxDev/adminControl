<div class="content-layout left-sidebar-fullheight-basic-inner-scroll"
     cdkScrollable>

    <mat-drawer-container>

        <!-- Drawer -->
        <mat-drawer [autoFocus]="false"
                    [mode]="drawerMode"
                    [opened]="drawerOpened">

            <div class="calendars">
                <ng-container *ngFor="let calendar of calendars">
                    <mat-checkbox [value]="calendar.id"
                                  [checked]="calendar.visible"
                                  (change)="toggleCalendarVisibility(calendar)">
                        {{calendar.title}}
                    </mat-checkbox>
                </ng-container>
            </div>

        </mat-drawer>

        <mat-drawer-content>

            <!-- Main -->
            <div class="main">

                <div class="header">

                    <button class="today"
                            mat-stroked-button
                            (click)="today()">
                        Today
                    </button>

                    <button class="previous"
                            mat-icon-button
                            (click)="previous()">
                        <mat-icon>chevron_left</mat-icon>
                    </button>

                    <button class="next"
                            mat-icon-button
                            (click)="next()">
                        <mat-icon>chevron_right</mat-icon>
                    </button>

                    <h4 class="title">
                        {{viewTitle}}
                    </h4>

                    <a class="settings"
                       [routerLink]="['settings']"
                       mat-icon-button>
                        <mat-icon>settings</mat-icon>
                    </a>

                    <mat-form-field class="asm-mat asm-mat-dense asm-mat-no-label asm-mat-no-subscript view-changer"
                                    [appearance]="'outline'">
                        <mat-select (selectionChange)="changeView(viewChanger.value)"
                                    [value]="view"
                                    #viewChanger="matSelect">
                            <mat-option [value]="'dayGridMonth'">Month</mat-option>
                            <mat-option [value]="'timeGridWeek'">Week</mat-option>
                            <mat-option [value]="'timeGridDay'">Day</mat-option>
                            <mat-option [value]="'listMonth'">Schedule</mat-option>
                        </mat-select>
                    </mat-form-field>

                </div>

                <div class="calendar">

                    <!-- Month view -->
                    <full-calendar [defaultView]="view"
                                   [events]="events"
                                   [eventTimeFormat]="eventTimeFormat"
                                   [firstDay]="settings.startWeekOn"
                                   [fixedWeekCount]="false"
                                   [header]="false"
                                   [height]="'parent'"
                                   [plugins]="calendarPlugins"
                                   [handleWindowResize]="false"
                                   (dateClick)="onDateClick($event)"
                                   (eventClick)="onEventClick($event)"
                                   #fullCalendar></full-calendar>

                </div>

                <!-- Event panel -->
                <ng-template #eventPanel>

                    <form [formGroup]="eventForm"
                          novalidate>

                        <mat-form-field class="title asm-mat asm-mat-no-label"
                                        [appearance]="'standard'">
                            <input matInput
                                   [formControlName]="'title'"
                                   [placeholder]="'Event title'">
                            <mat-error>This field is required</mat-error>
                        </mat-form-field>

                        <asm-date-range [formControlName]="'range'"
                                        [timeRange]="!eventForm.get('allDay').value"
                                        [timeFormat]="settings.timeFormat"></asm-date-range>

                        <mat-checkbox class="all-day"
                                      [color]="'primary'"
                                      [formControlName]="'allDay'">
                            All day
                        </mat-checkbox>

                        <button class="save"
                                mat-flat-button
                                [disabled]="eventForm.pristine || eventForm.invalid"
                                [color]="'primary'"
                                (click)="updateEvent()">
                            Save
                        </button>

                    </form>

                </ng-template>

            </div>

        </mat-drawer-content>

    </mat-drawer-container>

</div>


