<!-- Notifications toggle -->
<button class="asm-notifications-toggle"
        mat-icon-button
        (click)="openPanel()"
        #notificationsOrigin>
    <span *ngIf="unreadNotificationsCount > 0"
          class="dot"></span>
    <mat-icon [svgIcon]="'notifications'"></mat-icon>
</button>

<!-- Notifications panel -->
<ng-template #notificationsPanel>

    <div class="asm-notifications-panel">

        <div class="header">

            <div class="title"
                 *ngIf="title">
                {{title}}
                <span class="unread-count"
                      *ngIf="unreadNotificationsCount > 0">
                    {{unreadNotificationsCount}}
                </span>
            </div>

            <div class="mark-all-as-read"
                 *ngIf="markAsRead"
                 (click)="markAllAsRead()">
                {{markAsRead}}
            </div>

        </div>

        <div class="content">

            <!-- Notifications -->
            <ng-container *ngFor="let notification of notifications">

                <div class="notification"
                     [ngClass]="{'unread': !notification.read}">

                    <!-- Icon -->
                    <mat-icon class="icon"
                              *ngIf="notification.icon && !notification.image"
                              [svgIcon]="notification.icon">
                    </mat-icon>

                    <!-- Image -->
                    <img class="image"
                         *ngIf="notification.image"
                         [src]="notification.image">

                    <!-- Title, description & time -->
                    <div class="notification-content">
                        <div class="title"
                             *ngIf="notification.title"
                             [innerHTML]="notification.title"></div>
                        <div class="description"
                             *ngIf="notification.description"
                             [innerHTML]="notification.description"></div>
                        <div class="time">{{notification.time | date:'MMM dd, h:mm a'}}</div>
                    </div>

                    <!-- Actions -->
                    <div class="actions">

                        <!-- Indicator -->
                        <button class="indicator"
                                mat-icon-button
                                (click)="toggleRead(notification)"
                                [matTooltip]="notification.read ? 'Mark as unread' : 'Mark as read'">
                            <span *ngIf="!notification.read"
                                  class="unread"></span>
                            <span *ngIf="notification.read"
                                  class="read"></span>
                        </button>

                        <button class="remove"
                                mat-icon-button
                                (click)="removeNotification(notification)"
                                [matTooltip]="'Remove'">
                            <mat-icon [svgIcon]="'close'"></mat-icon>
                        </button>

                    </div>

                </div>

            </ng-container>

            <ng-container *ngIf="!notifications || !notifications.length">
                <div class="no-notifications">
                    <mat-icon [svgIcon]="'dripicons:bell'"></mat-icon>
                    <span>No notifications</span>
                </div>
            </ng-container>

        </div>

    </div>

</ng-template>
