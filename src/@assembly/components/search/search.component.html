<!-- Open button, 'bar' and 'fullscreen' only -->
<button class="asm-search-toggle-open"
        mat-icon-button
        *ngIf="appearance!== 'basic' && !opened"
        (click)="open()">
    <mat-icon [svgIcon]="'search'"></mat-icon>
</button>

<!-- Search container -->
<div class="asm-search-container"
     *ngIf="appearance === 'basic' || (appearance !== 'basic' && opened)"
     [@.disabled]="appearance === 'basic'"
     @slideInTop
     @slideOutTop>

    <mat-form-field class="asm-search-input asm-mat-dense asm-mat-rounded asm-mat-no-subscript"
                    #searchInput>
        <mat-icon matPrefix
                  *ngIf="appearance !== 'fullscreen'"
                  [svgIcon]="'search'"></mat-icon>
        <input matInput
               [formControl]="searchControl"
               [placeholder]="placeholder"
               (keydown)="onKeydown($event)"
               [matAutocomplete]="matAutocomplete">
    </mat-form-field>

    <mat-autocomplete [class]="'asm-search-results asm-search-results-appearance-' + appearance"
                      #matAutocomplete="matAutocomplete">

        <mat-optgroup class="asm-search-no-results"
                      *ngIf="results && results.length === 0">
            <mat-option>{{noResultsText}}</mat-option>
        </mat-optgroup>

        <mat-optgroup *ngFor="let group of results"
                      [label]="group.label">

            <mat-option *ngFor="let result of group.results">

                <ng-template [ngTemplateOutlet]="resultTemplate"
                             [ngTemplateOutletContext]="{$implicit: result}"></ng-template>

            </mat-option>

        </mat-optgroup>

    </mat-autocomplete>

    <!-- Close button, 'bar' and 'fullscreen' only -->
    <button class="asm-search-toggle-close"
            mat-icon-button
            *ngIf="appearance !== 'basic'"
            (click)="close()">
        <mat-icon [svgIcon]="'close'"></mat-icon>
    </button>

</div>
